<!doctype html>
<html>
<head>
    <style>
        @-webkit-keyframes width-change {
               0%, 100% {
                   width: 320px
               }
               50% {
                   width: 260px
               }
           }
        .figcaption {
            background: #EEE;
            width: 410px;
            height: 3em;
            margin: 1em;
        }
        .figcaption p {
            margin: 0;
            line-height: 1.5em;
        }


    </style>
    <script src="//cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
</head>
<body>


<div style="font-size:12px;line-height: 18px;-webkit-animation: width-change 8s ease infinite;background: rgb(230, 230, 230);">
    <div style="float:right;margin-left: -50px;width:100%;position:relative;background: hsla(229, 100%, 75%, 0.5);">
        适用于背景单色然后设置渐变透明  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid assumenda, atque, aut debitis explicabo facilis harum id inventore magni non obcaecati perferendis possimus quasi recusandae sequi soluta temporibus tenetur ullam.
    </div>
    <div style="float:right;position:relative;width:50px;height: 108px;color:transparent;background: hsla(334, 100%, 75%, 0.5);">
        placeholder
    </div>
    <div style="float:right;width:50px;height:18px;position: relative;background: hsla(27, 100%, 75%, 0.5);left: 100%;-webkit-transform: translate(-100%,-100%); ">
        ...更多
    </div>
</div>


<div style="clear: both"></div>





<div class="figcaption"><p>作为微软的游戏平台，Xbox已经出现在了Windows Phone和Windows 8中，就在最近，微软宣布将旗下的Zune消费品牌也一并整合至Xbox品牌下，Xbox Live服务影响力越来越大，渗透面也越来越广。</p></div>

<div class="figcaption"><p>固定一个喜欢的网站可不可以？当然！把每天常去的网站统统固定到开始屏幕中。如何固定？打开 IE10，在网页空白处点击鼠标右键，在应用栏中点击“图钉”图标即可完成固定。</p></div>

<div class="figcaption"><p>先前给大家介绍了很好用的 Colors！今天给大家介绍一款风格不同的画画软件——Fresh Paint，我们可以用它画出油画。</p></div>

<div class="figcaption"><p>You probably can't do it (currently?) without a fixed-width font like Courier. With a fixed-width font every letter occupies the same horizontal space, so you could probably count the letters and multiply the result with the current font size in ems or exs. Then you would just have to test how many letters fit on one line, and then break it up.</p></div>
<script>

         $(".figcaption").each(function(i){
            var divH = $(this).height();
            var $p = $("p", $(this)).eq(0);
            while ($p.outerHeight() > divH) { // 对比元素的高度 个 外部高度 每次删去一个字符 直至 符合要求为止
                $p.html($p.html().replace(/(\s)*([a-zA-Z0-9]+|\W)(<a>\.\.\.更多<\/a>)?$/, "<a>...更多</a>"));
            }
        });

    function a(){
        return  $(".figcaption").each(function(i){
            var divH = $(this).height();
            var $p = $("p", $(this)).eq(0);
            while ($p.outerHeight() > divH) { // 对比元素的高度 个 外部高度 每次删去一个字符 直至 符合要求为止
                $p.html($p.html().replace(/(\s)*([a-zA-Z0-9]+|\W)(<a>\.\.\.更多<\/a>)?$/, "<a>...更多</a>"));
            }
        });
    }


</script>

</body>
</html>