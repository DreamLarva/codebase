<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    #test{
      width:5px;
    }
  </style>
</head>
<body onload="onLoad()">
<div id="test" style="height:17px;background:red">0%</div>
<input type="button" value="Run" id="run">
<script>
  window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  var start = null;
  var ele = document.getElementById('test');
  var progress = 0;
  function step(timestamp) {
    progress += 1;
//    console.log(ele.width = progress + "%")
    ele.style.width = progress + "%";
    ele.innerHTML = progress + "%";
    if (progress < 100) {
      requestAnimationFrame(step)
    }
  }
 // requestAnimationFrame(step);
  document.getElementById("run").addEventListener("click",function(){
    ele.width = "1px";
    progress = 0;
    requestAnimationFrame(step)
  },false)

</script>
</body>
</html>