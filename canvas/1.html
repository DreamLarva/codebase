<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery-1.11.2.min.js"></script>
</head>
<body>
<script>

    $(function(){
        var height=document.documentElement.clientHeight;
        var width = document.documentElement.clientWidth;
        $('body').append('<div id="shade"><div id="bomb"><div id="bomb_title">请在方框内签名</div><canvas id="canvas" height='+height/2.8+' width='+width*0.9 +'></canvas><div id="bomb_button">确认</div></div></div>');
        $('#shade').css({width:'100%',height:height,background:'rgba(0,0,0,0.5)',position:'absolute',top:0,display:'none'});
        $('#bomb').css({width:'90%',margin:'20% auto',background:'#fff',padding:'5% 0% 10% 0%'});
        $('#bomb_title').css({textAlign:'center',fontSize:'150%'});
        $('#canvas').css({background:'#dddddd',margin:'5%',width:'90%'});
        $('#bomb_button').css({width:'90%',textAlign:'center',color:'#fff',padding:'5%',background:'#009ee0',margin:'5% auto',fontSize:'130%',borderRadius:'5px'});

        $('#bomb_button').click(function(){
            $('#shade').css('display','none');
        });


        C_next("shade")
    });
    function C_next(shade){
        var sh=document.getElementById(shade);
        sh.style.display='block';
        cvs('canvas');

        $('body').on('touchmove', function (event) {
            event.preventDefault();
        });
    }
    var canvas;
    var context;
    var flag;
    function cvs(cvsOBJ){
        canvas=document.getElementById(cvsOBJ);
        context=canvas.getContext('2d');
        context.strokeStyle='red';
        context.lineWidth=3;
        canvas.addEventListener('touchstart',down);
        canvas.addEventListener('touchmove',move);
        canvas.addEventListener('touchend',up);
    }

    function down(e){
        flag=true;
        var touch = e.targetTouches[0];
        var left=touch.pageX-canvas.offsetLeft;
        var top=touch.pageY-canvas.offsetTop;
        context.moveTo(left,top);
        context.beginPath();
    }

    function move(e){
        if(flag){
            var touch = e.targetTouches[0];
            var left=touch.pageX-canvas.offsetLeft;
            var top=touch.pageY-canvas.offsetTop;

            context.lineTo(left,top);
            context.stroke();
        }
    }

    function up(e){
        flag=false;
    }



</script>
</body>
</html>