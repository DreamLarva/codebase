<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /*
    * 要求生成一个随机分组的函数
    * 1.根据一个总人数和分组数,为每个小组尽量均匀的分配人数
    * 2.每个小组必须随机生成
    * 3.根据总人数三分之一是女生,要求每个小组尽量均匀的分配女生*/

    // 数据量小assign方法更佳 方法量大assign1方法更佳
        function assign(all,group){

            var female = Math.floor(all/3);
            var male = all - female;
            var femaleArray = genderArray("female",female);
            var maleArray = genderArray("male",male);
            var result = [];
//            var finalResult = [];
            for(var i=1;i<=group;i++){
                result[result.length] = []
            }
            for(var i=0,j=0,temp;i<all;i++,j==group-1?j=0:j++){
                if(femaleArray.length){
                    temp = random(femaleArray);
                    result[j].push(spliceArray(femaleArray,temp))
                }else{
                    temp = random(maleArray);
                    result[j].push(spliceArray(maleArray,temp))
                }
            }
            // 快速打乱一个数组
            result.sort(function(){ return 0.5 - Math.random() })
            function spliceArray(arr,num){
                return arr.splice(num-1,1)[0]
            }
            function random(arr){
                return Math.floor(Math.random()*arr.length);
            }
            function genderArray(str,num){
                var result = [];
                for(var i=0;i<num;i++){
                    result.push(str+i)
                }
                return result
            }

            return result
        }
    console.time("time")
        assign(10000,99)
    console.timeEnd("time")
     console.time("time")
        assign(100000,999)
      console.timeEnd("time")


    function assign1(all,group){
        var female = Math.floor(all/3);
        var male = all - female;
        var femaleArray = genderArray("female",female).sort( ()=> 0.5 - Math.random());
        var maleArray = genderArray("male",male).sort(()=> 0.5 - Math.random());
        var result = [];
        for(var i=1;i<=group;i++){
            result[result.length] = []
        }
        for(var i=0,j=0;i<all;i++,j==group-1?j=0:j++){
            if(femaleArray.length){
                result[j].push(femaleArray.pop())
            }else{
                result[j].push(maleArray.pop())
            }
        }
        result.sort(()=> 0.5 - Math.random());


        function genderArray(str,num){
            var result = [];
            for(var i=0;i<num;i++){
                result.push(str+i)
            }
            return result
        }

        return result;

    }
    console.time("time");
    assign1(10000,99)
    console.timeEnd("time")
    console.time("time");
   assign1(100000,999)
    console.timeEnd("time")
</script>
</body>
</html>